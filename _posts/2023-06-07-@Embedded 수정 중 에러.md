---
title: Caused by, org.springframework.data.mapping.PropertyReferenceException, No property 'socialType' found for type 'Member’
date: 2023-06-07 10:00:00 +0900
categories: [개인프로젝트]
tags: [개인프로젝트,GettingThingsDone,JPA,error & resolve]     # TAG names should always be lowercase
published: true
---
Member entity에서 Social로그인에 관련된 부분은 따로 관리 하고 싶었다. 

```java
@DynamicInsert
@Entity
@Getter
@ToString
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Member extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column(length = 50, nullable = false)
    private String email;
    @Column(length = 100, nullable = true)
    private String password;
    @Column(length = 50, nullable = true)
    private String userName;
    @Column(length = 50, nullable = true)
    private  String name;
    @Column(length = 50, nullable = false)
    @Enumerated(EnumType.STRING)
    private Role role;
    @Enumerated(EnumType.STRING)
    @Column(name = "status", nullable = false)
    private MemberStatus status;

    @Column(name = "gender", nullable = true)
    @Enumerated(EnumType.STRING)
    private Gender gender;

    @Embedded
    private SocialGuest socialGuest;

}
```

```java
@Embeddable
@Getter
@ToString
@NoArgsConstructor
public class SocialGuest {
    @Column(name = "nickname")
    private String nickname; // 닉네임
    @Column(name = "profileImg")
    private String profileImg; // 프로필 이미지
    @Column(name = "age")
    private int age;
    @Column(name = "city")
    private String city; // 사는 도시
    @Enumerated(EnumType.STRING)
    @Column(name = "social_type")
    private SocialType socialType; // KAKAO, NAVER, GOOGLE
    private String socialId; // 로그인한 소셜 타입의 식별자 값 (일반 로그인인 경우 null)
}
```

# Cause

`Optional<Member> **findBySocialTypeAndSocialId**(SocialType socialType, String socialId);`

위 메서드 에서 발생한 에러였다. 

 **`@Embedded`** 어노테이션을 사용하면 **`Member`** 엔티티에 **`SocialGuest`** 객체의 필드들이 테이블 컬럼으로 매핑되게 된다.

**`@Embedded`** 어노테이션을 사용하여 **`SocialGuest`**를 임베딩했을 때, **`SocialGuest`**의 필드들은 **`Member`** 테이블의 컬럼으로 존재하지 않는다. 

따라서 **`findBySocialTypeAndSocialId`**와 같은 메서드를 사용하여 **`SocialGuest`**의 필드를 직접 조회하는 것은 불가능.

# Resolve

대신, **`findBySocialGuest_SocialTypeAndSocialGuest_SocialId`**와 같이 **`_`**를 사용하여 임베디드 객체의 필드를 조회할 수 있다. **`SocialGuest`**의 필드들은 **`_`**를 통해 접근할 수 있다.

```java
Optional<Member> findBySocialGuest_SocialTypeAndSocialGuest_SocialId(SocialType socialType, String socialId);
```