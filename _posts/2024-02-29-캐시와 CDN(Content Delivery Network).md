---
date: '2024-02-29 00:00:30 +0900'
categories:
  - Book
tags:
  - study
---

## 캐시

애플리케이션의 성능은 데이터베이스를 얼마나 자주 호출하느냐에 크게 좌우되는데, 캐시는 그런 문제를 완화할 수 있다. 

### 캐시 사용시 유의할 점

- 갱신은 잦지 않고, 참조가 비번한 경우 사용을 고려해볼만 하다.
- 만료정책이 없으면 데이터는 캐시에 계속 남는다. 만료기한이 너무 짧으면 데이터베이스를 자주 읽게 될것이고 너무 길면 원본과 차이가 날 가능성이 높아진다.
- 저장소의 원본을 갱신하는 연산과 캐시를 갱신하는 연산이 단일 트랜잭션으로 처리되지 않는 경우 일관성이 깨질 수 있다. [https://nymets.medium.com/번역-scaling-memcache-at-facebook-9c67f9e61282](https://nymets.medium.com/%EB%B2%88%EC%97%AD-scaling-memcache-at-facebook-9c67f9e61282) 참고해보자.
- 캐시 서버를 한 대만 두는 경우 해당 서버는 단일 장애지점(SPOF)이 되어버릴 가능성이 생긴다.
    - SPOF(Single Point Of Falilure) : 어떤 특정 지점에서의 장애가 전체 시스템의 동작을 중단시켜버릴 수 있는 경우
- 캐시 메모리는 얼마나 크게 잡을 것인가?
- 데이터 방출 정책은 무엇인가?

## CDN

정적 컨텐츠를 전송하는데 쓰이는 지리적으로 분산된 서버 네트워크로 이미지, 비디오, css, js등을 캐시할 수 있다.

사용자가 많거나 트래픽이 많은 애플리케이션에서 널리 사용된다. CDN을 사용하면 웹 사이트 또는 애플리케이션의 성능을 향상시키고 원본 서버의 부하를 줄이며 가용성을 높일 수 있다.

CDN은 다음과 같은 방식으로 동작한다.

1. 클라이언트가 URL을 통해서 image.png에 접근한다. 이 때 URL은 CDN 서비스 사업자가 제공하는 URL이다.
2. CDN 서버의 캐시에 해당 이미지가 없는 경우, 원본 서버에 요청을 보내 이미지를 가져온다.
3. 원본 서버로부터 이미지를 받은 CDN 서버는 파일을 캐시하고, 클라이언트에게 반환한다.

CDN은 다음과 같은 장점을 갖는다.

1. 지리적으로 가까운 CDN 서버를 통해 요청 응답 시간을 줄일 수 있다.
2. 캐시를 이용해서 전달하므로 불필요한 데이터베이스 쿼리를 줄일 수 있다.
